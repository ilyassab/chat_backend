(this.webpackJsonpchat=this.webpackJsonpchat||[]).push([[0],{234:function(e,t,a){e.exports=a.p+"static/media/wave.7cca2628.svg"},235:function(e,t,a){e.exports=a.p+"static/media/play.49c11397.svg"},236:function(e,t,a){e.exports=a.p+"static/media/pause.5333c55f.svg"},238:function(e,t,a){e.exports=a.p+"static/media/read.c1f419d6.svg"},239:function(e,t,a){e.exports=a.p+"static/media/noread.3c841bf6.svg"},265:function(e,t,a){e.exports=a(531)},274:function(e,t,a){},315:function(e,t,a){},316:function(e,t,a){},319:function(e,t,a){},321:function(e,t,a){},326:function(e,t,a){},327:function(e,t,a){},346:function(e,t,a){},347:function(e,t,a){},367:function(e,t,a){},396:function(e,t){},527:function(e,t,a){},528:function(e,t,a){},529:function(e,t,a){},531:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(4),s=a.n(c),l=a(40),i=a(22),o=a(60),u=a(229),m=a(27),d={items:[],currentDialog:"im",firstLoaded:!1},f={items:[],isLoading:!1},g={data:null,isAuth:!!window.localStorage.token,token:window.localStorage.token},p=a(258),E={items:[]},h=Object(o.c)({dialogs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"DIALOGS:SET_ITEMS":return Object(m.a)({},e,{items:n,firstLoaded:!0});case"DIALOGS:SET_CURRENT_DIALOG":return Object(m.a)({},e,{currentDialog:n});default:return e}},messages:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"MESSAGES:SET_ITEMS":return Object(m.a)({},e,{items:n,isLoading:!1});case"MESSAGES:SET_IS_LOADING":return Object(m.a)({},e,{isLoading:n});case"MESSAGES:REMOVE_MESSAGE":return Object(m.a)({},e,{items:e.items.filter((function(e){return e._id!==n}))});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"USER:SET_DATA":return Object(m.a)({},e,{data:n,isAuth:!0,token:window.localStorage.token});default:return e}},files:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"FILE:ADD_ITEMS":return Object(m.a)({},e,{items:[].concat(Object(p.a)(e.items),[n])});case"FILE:REMOVE_ITEMS":return Object(m.a)({},e,{currentDialog:n});default:return e}}}),v=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||o.d,b=[u.a],_=Object(o.e)(h,v(o.a.apply(void 0,b))),S=a(44),y=a(123),O=a(536),j=a(537),w=a(7),N=a(61),k=a(2),D=a.n(k),A=(a(274),function(e){return r.a.createElement(N.a,Object.assign({},e,{className:D()("button",e.className,{"button--large":"large"===e.size})}))}),C=(a(315),function(e){var t=e.children,a=e.className;return r.a.createElement("div",{className:D()("block",a)},t)}),M=a(16),x=a(532),L=function(e,t,a){return t[e]?a[e]?"error":"success":""},I=a(117),T=a.n(I),R=a(539),U=function(e){var t=e.text,a=e.title,n=e.type,r=void 0===n?"info":n,c=e.duration,s=void 0===c?2:c;return R.a[r]({message:a,description:t,duration:s})},V=a(234),F=a.n(V),G=a(235),z=a.n(G),P=a(236),Z=a.n(P),B=(a(316),function(e){var t=e.audio,a=Object(n.useState)(!1),c=Object(M.a)(a,2),s=c[0],l=c[1],i=Object(n.useState)(0),o=Object(M.a)(i,2),u=o[0],m=o[1],d=Object(n.useState)(0),f=Object(M.a)(d,2),g=f[0],p=f[1],E=Object(n.useRef)(null);return Object(n.useEffect)((function(){E.current.addEventListener("playing",(function(){l(!0)})),E.current.addEventListener("ended",(function(){l(!1),m(0)})),E.current.addEventListener("pause",(function(){l(!1)})),E.current.addEventListener("timeupdate",(function(){var e=E.current&&E.current.duration||0;p(E.current.currentTime),m(E.current.currentTime/e*100)}))}),[]),r.a.createElement("div",{className:"message__audio"},r.a.createElement("audio",{ref:E,src:t,preload:"auto"}),r.a.createElement("div",{className:"message__audio-progress",style:{width:u+"%"}}),r.a.createElement("div",{className:"message__audio-info"},r.a.createElement("div",{className:"message__audio-btn"},r.a.createElement("button",{onClick:function(){E&&(s?E.current.pause():E.current.play())}},s?r.a.createElement("img",{src:Z.a,alt:"waveSvg ".concat(t)}):r.a.createElement("img",{src:z.a,alt:"waveSvg ".concat(t)}))),r.a.createElement("div",{className:"message__audio-wave"},r.a.createElement("img",{src:F.a,alt:"waveSvg ".concat(t)})),r.a.createElement("span",{className:"message__audio-duration"},function(e){var t=Math.floor(e/60),a=(e%60).toFixed();return"".concat(t<10?"0":"").concat(t,":").concat(a<10?"0":"").concat(a)}(g))))}),J=function(e){var t=e.user,a=void 0===t?{}:t,n=e.text,c=e.read,s=e.id,l=e.date,i=e.audio,o=e.isMe,u=e.onDeleteMessage,m=e.attachments,d=void 0===m?[]:m,f=e.isTyping;return r.a.createElement("div",{className:D()("message",{"message--isme":o,"message--is-typing":f,"message--is-audio":i,"message--image":1===d.length})},r.a.createElement("div",{className:"message__content"},o&&r.a.createElement(ne,{isRead:c}),r.a.createElement(x.a,{content:r.a.createElement("div",null,r.a.createElement(N.a,{onClick:function(){return u(s)}},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435")),trigger:"click"},r.a.createElement("div",{className:"message__icon-actions"},r.a.createElement(N.a,{type:"link",icon:"ellipsis"}))),r.a.createElement("div",{className:"message__avatar"},r.a.createElement(ce,{user:a})),r.a.createElement("div",{className:"message__info"},(i||n||f)&&r.a.createElement("div",{className:"message__bubble"},n&&r.a.createElement("p",{className:"message__text"},n),f&&r.a.createElement("div",{className:"message__typing"},r.a.createElement("span",null),r.a.createElement("span",null),r.a.createElement("span",null)),i&&r.a.createElement(B,{audio:i})),r.a.createElement("div",{className:"message__attachments"},d.map((function(e){return r.a.createElement("div",{key:e.url,className:"message__attachments-item"},r.a.createElement("img",{src:e.url,alt:e.filename}))}))),l&&r.a.createElement("span",{className:"message__date"},r.a.createElement(Q,{date:l})))))},W=a(165),H=a(261),X=function(e){return+Date.now()-new Date(e)<3e5},q=(a(319),function(e){var t=e.partner,a=void 0===t?{}:t,n=e.message,c=e.unread,s=e.isMe,i=e.id,o=e.currentDialog;return r.a.createElement(l.b,{to:"/dialog/".concat(i)},r.a.createElement("div",{className:D()("dialogs__item",{"dialogs__item--online":X(a.last_seen),active:o===i})},r.a.createElement("div",{className:"dialogs__item-avatar"},r.a.createElement(ce,{user:a})),r.a.createElement("div",{className:"dialogs__item-info"},r.a.createElement("div",{className:"dialogs__item-info-top"},r.a.createElement("b",null,a.fullname),n&&r.a.createElement("span",null,function(e){var t=new Date(e);return Object(H.a)(t)?Object(W.a)(t,"HH:mm"):Object(W.a)(t,"dd.MM.yyyy")}(n.createdAt))),r.a.createElement("div",{className:"dialogs__item-info-bottom"},n&&r.a.createElement("p",null,n.text),0===c&&s&&n&&r.a.createElement(ne,{isRead:n.unread}),c>0&&r.a.createElement("div",{className:"dialogs__item-info-bottom-count"},c>9?"+9":c)))))}),K=a(256),$=a(257),Q=function(e){var t=e.date;return r.a.createElement(n.Fragment,null,Object(K.a)(new Date(t),{addSuffix:!0,locale:$.a}))},Y=a(238),ee=a.n(Y),te=a(239),ae=a.n(te),ne=function(e){return e.isRead?r.a.createElement("img",{className:"message__icon-read",src:ee.a,alt:"Checked icon"}):r.a.createElement("img",{className:"message__icon-read message__icon-read--no",src:ae.a,alt:"Checked icon"})},re=(a(321),function(e){var t=e.items,a=e.onSearch,n=e.inputValue,c=e.currentDialog;return t=t.sort((function(e,t){return new Date(t.date)-new Date(e.date)})),r.a.createElement("div",{className:"dialogs"},r.a.createElement("div",{className:"chat__sidebar-search"},r.a.createElement(j.a.Search,{placeholder:"\u041f\u043e\u0438\u0441\u043a \u0441\u0440\u0435\u0434\u0438 \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u043e\u0432",onChange:function(e){return a(e.target.value)},value:n})),t.map((function(e){return r.a.createElement(q,{key:e._id,id:e._id,author:e.author,partner:e.partner,message:e.lastMessage,unread:0,onSearch:a,currentDialog:c})})))}),ce=(a(326),function(e){var t=e.user;if(t.avatar)return r.a.createElement("img",{src:t.avatar,alt:"".concat(t.avatar," avatar")});var a=function(e){var t=e.substr(0,3).split("").map((function(e){return e.charCodeAt(0)>255?255:e.charCodeAt(0)})),a=Object(M.a)(t,3),n=a[0],r=a[1],c=a[2],s=T()({r:n,g:r,b:c}),l=T()({r:n,g:r,b:c}).lighten(40);return{color:s.toHexString(),colorLighten:l.toHexString()}}(t._id),n=t.fullname[0].toUpperCase();return r.a.createElement("div",{className:"avatar avatar--symbol",style:{background:"linear-gradient(135deg,".concat(a.color," 0%,").concat(a.colorLighten," 96.52%)")}},n)}),se=(a(327),function(e){var t=e.online,a=e.fullname;return r.a.createElement("div",{className:"chat__dialog-header-center"},r.a.createElement("b",{className:"chat__dialog-header-username"},a),r.a.createElement("div",{className:"chat__dialog-header-status"},r.a.createElement("span",{className:D()("status",{"status--online":t})},t?"\u043e\u043d\u043b\u0430\u0439\u043d":"\u043e\u0444\u043b\u0430\u0439\u043d")))}),le=a(242),ie=a(255),oe=(a(346),function(e){var t=e.onSendMessage,a=Object(n.useState)(""),c=Object(M.a)(a,2),s=c[0],l=c[1],i=Object(n.useState)(!1),o=Object(M.a)(i,2),u=o[0],m=o[1];return r.a.createElement("div",{className:"chat-input"},r.a.createElement("div",{className:"chat-input__smile-btn"},u&&r.a.createElement("div",{className:"chat-input__emoji-picker"},r.a.createElement(ie.a,{set:"emojione"})),r.a.createElement(N.a,{onClick:function(){m(!u)},type:"ghost",icon:"smile"})),r.a.createElement(j.a,{onKeyUp:function(e){13===e.keyCode&&t(s),13===e.keyCode&&l("")},value:s,onChange:function(e){return l(e.target.value)},size:"large",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043a\u0441\u0442 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f..."}),r.a.createElement("div",{className:"chat-input__actions"},s?r.a.createElement(N.a,{type:"ghost",icon:"camera"}):r.a.createElement(N.a,{type:"ghost",icon:"audio"}),r.a.createElement(le.UploadField,{file:function(e){return console.log(e)},containerProps:{className:"photos"},uploadProps:{accept:".jpg,.png,.jpeg,.gif,.bmp",multiple:"multiple"}},r.a.createElement(N.a,{type:"ghost",icon:"camera"}))))}),ue=a(533),me=a(82),de=(a(347),function(e){var t=e.blockRef,a=e.items,n=e.currentUser,c=e.onDeleteMessage,s=e.isLoading;return r.a.createElement("div",{ref:t,className:"messages__block"},s?r.a.createElement("div",{className:"messages--loading"},r.a.createElement(ue.a,{tip:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439..."})):a.length>0?a.map((function(e){return r.a.createElement(J,{key:e._id,id:e._id,user:e.user,date:e.date,text:e.text,read:e.read,onDeleteMessage:c,isMe:n._id===e.user._id})})):r.a.createElement(me.a,{description:"\u041d\u0435\u0442 \u043d\u0438 \u043e\u0434\u043d\u043e\u0433\u043e \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f"}))}),fe=a(81),ge=a.n(fe);ge.a.defaults.baseURL=window.location.origin,ge.a.defaults.headers.common.token=localStorage.token;var pe=ge.a,Ee=function(){return pe.get("/dialogs")},he=function(e,t){return pe.post("/dialogs",{partner:e,text:t})},ve=function(e){return pe.get("/messages?dialog=".concat(e))},be=function(e,t){return pe.post("/messages",{text:e,dialog_id:t})},_e=function(e){return pe.delete("/messages/".concat(e))},Se=function(e){return pe.post("/user/login",e)},ye=function(){return pe.get("user/me")},Oe=function(e){return pe.post("/user/register",e)},je=function(e){return pe.get("/user/verify?hash=".concat(e))},we=function(e){return pe.get("/user/find?query=".concat(e))},Ne=(a(367),function(e){var t=e.location,a=e.history,c=t.search&&t.search.split("=")[1],s=Object(n.useState)(!0),l=Object(M.a)(s,2),i=l[0],o=l[1],u=Object(n.useState)(!1),m=Object(M.a)(u,2),d=m[0],f=m[1];Object(n.useEffect)((function(){i&&je(c).then((function(e){o(!1),f(!0)})).catch((function(e){o(!1),f(!1)}))}));if(i){var g=r.a.createElement(w.a,{type:"loading",style:{fontSize:24},spin:!0});return r.a.createElement("div",{className:"verify"},r.a.createElement(C,{className:"block__spinner"},r.a.createElement(ue.a,{indicator:g})))}return r.a.createElement("div",{className:"verify"},r.a.createElement(C,null,r.a.createElement("div",{className:"verify__success-block"},d?r.a.createElement(n.Fragment,null,r.a.createElement("div",null,r.a.createElement(w.a,{type:"check-circle",theme:"twoTone"})),r.a.createElement("h2",null," \u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u043b\u0438 \u043f\u043e\u0447\u0442\u0443!"),r.a.createElement("br",null),r.a.createElement(A,{onClick:function(){a.push("/login")},type:"primary"},"\u0412\u043e\u0439\u0442\u0438")):r.a.createElement(n.Fragment,null,r.a.createElement("div",null,r.a.createElement(w.a,{type:"close-circle",theme:"twoTone"})),r.a.createElement("h2",null,"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u043d\u0435 \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d")))))}),ke=a(534),De=a(538),Ae=a(245),Ce=a.n(Ae)()(window.location.origin.replace("3000","3030")),Me={setDialogs:function(e){return{type:"DIALOGS:SET_ITEMS",payload:e}},fetchDialogs:function(){return function(e){Ee().then((function(t){var a=t.data;e(Me.setDialogs(a))}))}},setCurrentDialog:function(e){return{type:"DIALOGS:SET_CURRENT_DIALOG",payload:e}}},xe=Me,Le={setMessages:function(e){return{type:"MESSAGES:SET_ITEMS",payload:e}},setIsLoading:function(e){return{type:"MESSAGES:SET_IS_LOADING",payload:e}},removeMessage:function(e){return{type:"MESSAGES:REMOVE_MESSAGE",payload:e}},addMessage:function(e){return function(t){ve(e).then((function(e){var a=e.data;t(Le.setMessages(a))}))}},removeMessageById:function(e){return function(t){window.confirm("\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435?")&&_e(e).then((function(a){a.data;t(Le.removeMessage(e))})).catch((function(e){console.log("Cannot remove message")}))}},fetchSendMessage:function(e){return function(t,a){var n=a().dialogs;e&&n.currentDialog&&be(e,n.currentDialog)}},fetchMessages:function(e){return function(t){t(Le.setIsLoading(!0)),ve(e).then((function(e){var a=e.data;t(Le.setMessages(a))})).catch((function(){t(Le.setIsLoading(!1))}))}}},Ie=Le,Te={setUserData:function(e){return{type:"USER:SET_DATA",payload:e}},fetchUserData:function(){return function(e){ye().then((function(t){var a=t.data;return e(Te.setUserData(a))}))}},fetchUserRegister:function(e,t,a){return function(e){return Oe(a).then((function(e){"error"===e.data.status?(t(""),U({title:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u043d\u0435\u0443\u0441\u043f\u0435\u0448\u043d\u0430",text:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438",type:"error"})):t("success")})).catch((function(e){var a=e.response.data;a.message&&11e3===a.message.code?t("user_found"):t("error")}))}},fetchUserLogin:function(e,t,a){return function(e){return Se(a).then((function(a){var n=a.data,r=n.status,c=n.token;"error"===r?(t(""),U({title:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438",text:"\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c",type:"error"})):(t(""),U({title:"\u041e\u0442\u043b\u0438\u0447\u043d\u043e",text:"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f \u0443\u0441\u043f\u0435\u0448\u043d\u0430",type:"success"}),e(Te.setUserData(n)),localStorage.token=c,ge.a.defaults.headers.common.token=localStorage.token,e(Te.fetchUserData()))})).catch((function(e){t("error")}))}}},Re=Te,Ue=Object(i.b)((function(e){return e.dialogs}),xe)((function(e){var t=e.fetchDialogs,a=e.items,c=e.currentDialog,s=e.firstLoaded,l=Object(n.useState)(""),i=Object(M.a)(l,2),o=i[0],u=i[1],m=Object(n.useState)(Array.from(a)),d=Object(M.a)(m,2),f=d[0],g=d[1];return Object(n.useEffect)((function(){a.length||s?g(a):(t(),Ce.on("SERVER:DIALOG_CREATED",(function(){t()})))}),[t,a,s]),r.a.createElement(re,{items:f,onSearch:function(e){g(a.filter((function(t){return t.partner.fullname.toLowerCase().indexOf(e.toLowerCase())>=0}))),u(e)},inputValue:o,currentDialog:c})})),Ve=Object(i.b)((function(e){var t=e.dialogs,a=e.messages,n=e.user;return Object(m.a)({currentDialog:t.currentDialog},a,{},n)}),Ie)((function(e){var t=Object(n.useRef)(null),a=e.items,c=e.currentDialog,s=e.fetchMessages,l=e.data,i=e.addMessage,o=e.removeMessageById,u=e.isLoading;return console.log(e),Object(n.useEffect)((function(){return"im"!==c&&(s(c),Ce.on("SERVER:NEW_MESSAGE",(function(){console.log("hererere"),i(c)}))),function(){Ce.removeListener("SERVER:NEW_MESSAGE")}}),[c,s,i]),Object(n.useEffect)((function(){t.current&&t.current.scrollTo(0,9999999)}),[a]),"im"===c?r.a.createElement(me.a,{description:"\u041e\u0442\u043a\u0440\u043e\u0439\u0442\u0435 \u0434\u0438\u0430\u043b\u043e\u0433"}):r.a.createElement(de,{blockRef:t,onDeleteMessage:o,items:a,currentUser:l,isLoading:u})})),Fe=Object(i.b)(null,Ie)((function(e){var t=e.fetchSendMessage;return r.a.createElement(oe,{onSendMessage:function(e){t(e)}})})),Ge=Object(i.b)((function(e){return{dialogs:e.dialogs,user:e.user.data}}))((function(e){var t=e.dialogs,a=e.user;if(!t.items.length||"im"===t.currentDialog)return null;var n=!1,c=t.items.find((function(e){return e._id===t.currentDialog}));return n=c.author._id===a._id?X(c.partner.last_seen):X(c.author.last_seen),r.a.createElement(se,{online:n,fullname:c.partner.fullname})})),ze=Object(i.b)()((function(e){var t=Object(n.useState)(!1),a=Object(M.a)(t,2),c=a[0],s=a[1],l=Object(n.useState)(""),i=Object(M.a)(l,2),o=i[0],u=i[1],m=Object(n.useState)([]),d=Object(M.a)(m,2),f=d[0],g=d[1],p=Object(n.useState)(!1),E=Object(M.a)(p,2),h=E[0],v=E[1],b=Object(n.useState)(""),_=Object(M.a)(b,2),S=_[0],y=_[1],O=Object(n.useState)(""),j=Object(M.a)(O,2),w=j[0],N=j[1],k=function(){s(!1),u(""),N("")};return r.a.createElement(Be,{inputValue:o,visible:c,isLoading:h,onClose:k,onSelectUser:function(e){y(e)},setVisible:s,setInputValue:u,setMessageText:N,messageText:w,onChangeInput:function(e){u(e)},onSearch:function(e){v(!0),we(e).then((function(e){var t=e.data;g(t),v(!1)})).catch((function(e){v(!1)}))},users:f,onAddDialog:function(){v(!0),w&&he(S,w).then((function(e){e.data;v(!1),N(""),u(""),k()})).catch((function(){v(!1)})),v(!1)}})})),Pe=ke.a.Option,Ze=j.a.TextArea,Be=function(e){var t=e.visible,a=e.inputValue,n=e.messageText,c=e.setVisible,s=e.setMessageText,l=e.isLoading,i=e.onClose,o=e.onChangeInput,u=e.onSearch,m=e.onSelectUser,d=e.onAddDialog,f=e.users,g=(void 0===f?[]:f).map((function(e){return r.a.createElement(Pe,{key:e._id},e.fullname)}));return r.a.createElement("div",{className:"chat__sidebar"},r.a.createElement("div",{className:"chat__sidebar-header"},r.a.createElement("div",null,r.a.createElement(w.a,{type:"team"}),r.a.createElement("span",null,"\u0421\u043f\u0438\u0441\u043e\u043a \u0434\u0438\u0430\u043b\u043e\u0433\u043e\u0432")),r.a.createElement(w.a,{onClick:function(){return c(!0)},type:"form"})),r.a.createElement("div",{className:"chat__sidebar-dialogs"},r.a.createElement(Ue,null)),r.a.createElement(De.a,{title:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0434\u0438\u0430\u043b\u043e\u0433",visible:t,onOk:d,onCancel:i,okText:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c",cancelText:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",confirmLoading:l},r.a.createElement("p",null,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f \u0438\u043b\u0438 e-mail \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f:"),r.a.createElement(ke.a,{value:a,style:{width:"100%"},onSearch:u,onChange:o,onSelect:m,notFoundContent:null,defaultActiveFirstOption:!1,showArrow:!1,filterOption:!1,showSearch:!0},g),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("p",null,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043a\u0441\u0442 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f:"),r.a.createElement(Ze,{onChange:function(e){return s(e.target.value)},value:n,autoSize:{minRows:3,maxRows:5}})))},Je=a(164),We=a.n(Je),He=a(247),Xe=a(248),qe=a(259),Ke=a(249),$e=a(262),Qe=a(535);function Ye(e){return new Promise((function(t,a){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){return t(n.result)},n.onerror=function(e){return a(e)}}))}var et=function(e){function t(){var e,a;Object(He.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(qe.a)(this,(e=Object(Ke.a)(t)).call.apply(e,[this].concat(r)))).state={previewVisible:!1,previewImage:"",fileList:[{uid:"-1",name:"image.png",status:"done",url:"https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png"},{uid:"-2",name:"image.png",status:"done",url:"https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png"},{uid:"-3",name:"image.png",status:"done",url:"https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png"},{uid:"-4",name:"image.png",status:"done",url:"https://zos.alipayobjects.com/rmsportal/jkjgkEfvpUPVyRjUImniVslZfWPnJuuZ.png"},{uid:"-5",name:"image.png",status:"error"}]},a.handleCancel=function(){return a.setState({previewVisible:!1})},a.handlePreview=function(e){return We.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.url||e.preview){t.next=4;break}return t.next=3,We.a.awrap(Ye(e.originFileObj));case 3:e.preview=t.sent;case 4:a.setState({previewImage:e.url||e.preview,previewVisible:!0});case 5:case"end":return t.stop()}}))},a.handleChange=function(e){var t=e.fileList;return a.setState({fileList:t})},a}return Object($e.a)(t,e),Object(Xe.a)(t,[{key:"render",value:function(){var e=this.state,t=e.previewVisible,a=e.previewImage,n=e.fileList,c=r.a.createElement("div",null,r.a.createElement(w.a,{type:"plus"}),r.a.createElement("div",{className:"ant-upload-text"},"Upload"));return r.a.createElement("div",{className:"clearfix"},r.a.createElement(Qe.a,{action:"https://www.mocky.io/v2/5cc8019d300000980a055e76",listType:"picture-card",fileList:n,onPreview:this.handlePreview,onChange:this.handleChange},n.length>=8?null:c),r.a.createElement(De.a,{visible:t,footer:null,onCancel:this.handleCancel},r.a.createElement("img",{alt:"example",style:{width:"100%"},src:a})))}}]),t}(r.a.Component),tt=function(e){var t=e.touched,a=e.errors,n=e.handleChange,c=e.handleBlur,s=e.handleSubmit,i=e.status;return r.a.createElement("div",null,r.a.createElement("div",{className:"auth__top"},r.a.createElement("h2",null,"\u0412\u043e\u0439\u0442\u0438 \u0432 \u0430\u043a\u043a\u0430\u0443\u043d\u0442"),r.a.createElement("p",null,"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u043e\u0439\u0434\u0438\u0442\u0435 \u0432 \u0441\u0432\u043e\u0439 \u0430\u043a\u043a\u0430\u0443\u043d\u0442")),r.a.createElement(C,null,r.a.createElement(O.a,{className:"login-form"},r.a.createElement(O.a.Item,{validateStatus:L("email",t,a),hasFeedback:!0,help:t.email?a.email:""},r.a.createElement(j.a,{id:"email",prefix:r.a.createElement(w.a,{type:"mail",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"E-mail",size:"large",onChange:n,onBlur:c})),r.a.createElement(O.a.Item,{validateStatus:L("password",t,a),hasFeedback:!0,help:t.password?a.password:""},r.a.createElement(j.a,{prefix:r.a.createElement(w.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",size:"large",id:"password",onChange:n,onBlur:c})),r.a.createElement(O.a.Item,{validateStatus:"error",help:"error"===i?"Some errors":""},r.a.createElement(A,{onClick:s,type:"primary",size:"large"},"\u0412\u043e\u0439\u0442\u0438 \u0432 \u0430\u043a\u043a\u0430\u0443\u043d\u0442")),r.a.createElement(l.b,{className:"auth__register-link",to:"/register"},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"))))},at=function(e){var t=e.isAuth,a=e.values,n=e.errors,r={email:function(e){e?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e)||(n.email="\u041d\u0435\u0432\u0435\u0440\u043d\u043e \u0432\u0432\u0435\u0434\u0435\u043d e-mail"):n.email="\u0412\u0432\u0435\u0434\u0438\u0442\u0435 e-mail"},password:function(e){e?/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])/i.test(e)||t||(n.password="\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0446\u0438\u0444\u0440\u0443 \u0438 \u0431\u0443\u043a\u0432\u0443"):n.password="\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c"},fullname:function(e){e||(n.fullname="\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f")},password2:function(e){e?e!==a.password&&(n.password2="\u041f\u0430\u0440\u043e\u043b\u0438 \u043d\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0442"):n.password2="\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c"}};Object.keys(a).forEach((function(e){return r[e]&&r[e](a[e])}))},nt=Object(y.a)({mapPropsToValues:function(){return{email:"",password:""}},validate:function(e){var t={};return at({isAuth:!0,values:e,errors:t}),t},handleSubmit:function(e,t){var a=t.setSubmitting,n=t.setStatus;return _.dispatch(Re.fetchUserLogin(a,n,e))},displayName:"LoginForm"})(tt),rt=function(e){var t=e.touched,a=e.errors,n=e.handleChange,c=e.handleBlur,s=e.handleSubmit,i=e.status;return r.a.createElement("div",null,"success"!==i?r.a.createElement("div",{className:"auth__top"},r.a.createElement("h2",null,"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"),r.a.createElement("p",null,"\u0414\u043b\u044f \u0432\u0445\u043e\u0434\u0430 \u0432 \u0447\u0430\u0442, \u0432\u0430\u043c \u043d\u0443\u0436\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f")):r.a.createElement("div",{className:"auth__top"},r.a.createElement("h2",null,"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u043f\u0440\u043e\u0448\u043b\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e!")),r.a.createElement(C,null,"success"!==i?r.a.createElement(O.a,{className:"login-form"},r.a.createElement(O.a.Item,{validateStatus:L("email",t,a),hasFeedback:!0,help:t.email?a.email:""},r.a.createElement(j.a,{id:"email",prefix:r.a.createElement(w.a,{type:"mail",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"E-mail",size:"large",onChange:n,onBlur:c})),r.a.createElement(O.a.Item,{validateStatus:L("fullname",t,a),hasFeedback:!0,help:t.fullname?a.fullname:""},r.a.createElement(j.a,{id:"fullname",prefix:r.a.createElement(w.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"\u0412\u0430\u0448\u0435 \u0438\u043c\u044f",size:"large",onChange:n,onBlur:c})),r.a.createElement(O.a.Item,{validateStatus:L("password",t,a),hasFeedback:!0,help:t.password?a.password:""},r.a.createElement(j.a,{prefix:r.a.createElement(w.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",size:"large",id:"password",onChange:n,onBlur:c})),r.a.createElement(O.a.Item,{validateStatus:L("password2",t,a),hasFeedback:!0,help:t.password2?a.password2:""},r.a.createElement(j.a,{prefix:r.a.createElement(w.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",size:"large",id:"password2",onChange:n,onBlur:c})),r.a.createElement(O.a.Item,{validateStatus:"error",help:"error"===i?"Some errors":"user_found"===i?"E-mail \u0443\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d":""},r.a.createElement(A,{onClick:s,type:"primary",size:"large"},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f")),r.a.createElement(l.b,{className:"auth__register-link",to:"/login"},"\u0412\u043e\u0439\u0442\u0438 \u0432 \u0430\u043a\u043a\u0430\u0443\u043d\u0442")):r.a.createElement("div",{className:"auth__success-block"},r.a.createElement("div",null,r.a.createElement(w.a,{type:"info-circle",theme:"twoTone"})),r.a.createElement("h2",null,"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0435 \u0441\u0432\u043e\u0439 \u0430\u043a\u043a\u0430\u0443\u043d\u0442"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("p",null,"\u041d\u0430 \u0412\u0430\u0448\u0443 \u043f\u043e\u0447\u0442\u0443 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e \u043f\u0438\u0441\u044c\u043c\u043e \u0441 \u0441\u0441\u044b\u043b\u043a\u043e\u0439 \u0434\u043b\u044f \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u044f \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430."))))},ct=Object(y.a)({mapPropsToValues:function(){return{email:"",password:"",fullname:"",password2:""}},validate:function(e){var t={};return at({isAuth:!1,values:e,errors:t}),t},handleSubmit:function(e,t){var a=t.setSubmitting,n=t.setStatus;return _.dispatch(Re.fetchUserRegister(a,n,e))},displayName:"RegisterForm"})(rt),st=(a(527),function(){return r.a.createElement("section",{className:"auth"},r.a.createElement("div",{className:"auth__content"},r.a.createElement(S.b,{exact:!0,path:["/","/login"],component:nt}),r.a.createElement(S.b,{exact:!0,path:"/register",component:ct})))}),lt=(a(528),Object(S.f)(Object(i.b)((function(e){return e.dialogs}),xe)((function(e){var t=e.setCurrentDialog;return Object(n.useEffect)((function(){var a=e.location.pathname.split("/").pop();t(a)}),[e,t]),r.a.createElement("section",{className:"home"},r.a.createElement("div",{className:"chat"},r.a.createElement(ze,null),r.a.createElement("div",{className:"chat__dialog"},r.a.createElement("div",{className:"chat__dialog-header"},r.a.createElement("div",null),r.a.createElement(Ge,null),r.a.createElement(w.a,{type:"ellipsis",style:{fontSize:"22px"}})),r.a.createElement("div",{className:"chat__dialog-messages"},r.a.createElement(Ve,null)),r.a.createElement("div",{className:"chat__dialog-input"},r.a.createElement(Fe,null)),r.a.createElement(et,null))))})))),it=Object(i.b)((function(e){return{isAuth:e.user.isAuth}}))((function(e){var t=e.isAuth;return r.a.createElement("div",{className:"wrapper"},t?r.a.createElement(S.a,{to:"/im"}):"/verify"===window.location.pathname?r.a.createElement(S.b,{path:"/verify",component:Ne}):r.a.createElement(S.a,{to:"/login"}),r.a.createElement(S.b,{exact:!0,path:["/","/login","/register"],component:st}),r.a.createElement(S.b,{exact:!0,path:["/im","/dialog/:id"],component:lt}))}));a(529),a(530);_.dispatch(Re.fetchUserData()),s.a.render(r.a.createElement(i.a,{store:_},r.a.createElement(l.a,null,r.a.createElement(it,null))),document.getElementById("root"))}},[[265,1,2]]]);
//# sourceMappingURL=main.1c10d647.chunk.js.map