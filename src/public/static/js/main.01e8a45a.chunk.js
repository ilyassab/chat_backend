(this.webpackJsonpchat=this.webpackJsonpchat||[]).push([[0],{231:function(e,t,a){e.exports=a.p+"static/media/wave.7cca2628.svg"},232:function(e,t,a){e.exports=a.p+"static/media/play.49c11397.svg"},233:function(e,t,a){e.exports=a.p+"static/media/pause.5333c55f.svg"},235:function(e,t,a){e.exports=a.p+"static/media/read.c1f419d6.svg"},236:function(e,t,a){e.exports=a.p+"static/media/noread.3c841bf6.svg"},259:function(e,t,a){e.exports=a(516)},268:function(e,t,a){},309:function(e,t,a){},310:function(e,t,a){},313:function(e,t,a){},315:function(e,t,a){},320:function(e,t,a){},321:function(e,t,a){},322:function(e,t,a){},323:function(e,t,a){},343:function(e,t,a){},372:function(e,t){},512:function(e,t,a){},513:function(e,t,a){},514:function(e,t,a){},516:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(4),s=a.n(c),l=a(40),i=a(22),o=a(59),u=a(226),m=a(23),d={items:[],currentDialog:"im",firstLoaded:!1},f={items:[],isLoading:!1},E={data:null,isAuth:!!window.localStorage.token,token:window.localStorage.token},g=a(252),p={items:[]},h=Object(o.c)({dialogs:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"DIALOGS:SET_ITEMS":return Object(m.a)({},e,{items:n,firstLoaded:!0});case"DIALOGS:SET_CURRENT_DIALOG":return Object(m.a)({},e,{currentDialog:n});default:return e}},messages:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"MESSAGES:SET_ITEMS":return Object(m.a)({},e,{items:n,isLoading:!1});case"MESSAGES:SET_IS_LOADING":return Object(m.a)({},e,{isLoading:n});case"MESSAGES:REMOVE_MESSAGE":return Object(m.a)({},e,{items:e.items.filter((function(e){return e._id!==n}))});default:return e}},user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:E,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"USER:SET_DATA":return Object(m.a)({},e,{data:n,isAuth:!0,token:window.localStorage.token});default:return e}},files:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case"FILE:ADD_ITEMS":return Object(m.a)({},e,{items:[].concat(Object(g.a)(e.items),[n])});case"FILE:REMOVE_ITEMS":return Object(m.a)({},e,{currentDialog:n});default:return e}}}),v=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||o.d,_=[u.a],b=Object(o.e)(h,v(o.a.apply(void 0,_))),S=a(44),y=a(121),O=a(521),N=a(522),w=a(7),j=a(60),D=a(2),k=a.n(D),M=(a(268),function(e){return r.a.createElement(j.a,Object.assign({},e,{className:k()("button",e.className,{"button--large":"large"===e.size})}))}),A=(a(309),function(e){var t=e.children,a=e.className;return r.a.createElement("div",{className:k()("block",a)},t)}),I=a(16),C=a(517),L=function(e,t,a){return t[e]?a[e]?"error":"success":""},x=a(115),T=a.n(x),R=a(524),U=function(e){var t=e.text,a=e.title,n=e.type,r=void 0===n?"info":n,c=e.duration,s=void 0===c?2:c;return R.a[r]({message:a,description:t,duration:s})},G=a(231),F=a.n(G),V=a(232),z=a.n(V),B=a(233),P=a.n(B),H=(a(310),function(e){var t=e.audio,a=Object(n.useState)(!1),c=Object(I.a)(a,2),s=c[0],l=c[1],i=Object(n.useState)(0),o=Object(I.a)(i,2),u=o[0],m=o[1],d=Object(n.useState)(0),f=Object(I.a)(d,2),E=f[0],g=f[1],p=Object(n.useRef)(null);return Object(n.useEffect)((function(){p.current.addEventListener("playing",(function(){l(!0)})),p.current.addEventListener("ended",(function(){l(!1),m(0)})),p.current.addEventListener("pause",(function(){l(!1)})),p.current.addEventListener("timeupdate",(function(){var e=p.current&&p.current.duration||0;g(p.current.currentTime),m(p.current.currentTime/e*100)}))}),[]),r.a.createElement("div",{className:"message__audio"},r.a.createElement("audio",{ref:p,src:t,preload:"auto"}),r.a.createElement("div",{className:"message__audio-progress",style:{width:u+"%"}}),r.a.createElement("div",{className:"message__audio-info"},r.a.createElement("div",{className:"message__audio-btn"},r.a.createElement("button",{onClick:function(){p&&(s?p.current.pause():p.current.play())}},s?r.a.createElement("img",{src:P.a,alt:"waveSvg ".concat(t)}):r.a.createElement("img",{src:z.a,alt:"waveSvg ".concat(t)}))),r.a.createElement("div",{className:"message__audio-wave"},r.a.createElement("img",{src:F.a,alt:"waveSvg ".concat(t)})),r.a.createElement("span",{className:"message__audio-duration"},function(e){var t=Math.floor(e/60),a=(e%60).toFixed();return"".concat(t<10?"0":"").concat(t,":").concat(a<10?"0":"").concat(a)}(E))))}),Z=function(e){var t=e.user,a=void 0===t?{}:t,n=e.text,c=e.read,s=e.id,l=e.date,i=e.audio,o=e.isMe,u=e.onDeleteMessage,m=e.attachments,d=void 0===m?[]:m,f=e.isTyping;return r.a.createElement("div",{className:k()("message",{"message--isme":o,"message--is-typing":f,"message--is-audio":i,"message--image":1===d.length})},r.a.createElement("div",{className:"message__content"},o&&r.a.createElement(ne,{isRead:c}),r.a.createElement(C.a,{content:r.a.createElement("div",null,r.a.createElement(j.a,{onClick:function(){return u(s)}},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435")),trigger:"click"},r.a.createElement("div",{className:"message__icon-actions"},r.a.createElement(j.a,{type:"link",icon:"ellipsis"}))),r.a.createElement("div",{className:"message__avatar"},r.a.createElement(se,{user:a})),r.a.createElement("div",{className:"message__info"},(i||n||f)&&r.a.createElement("div",{className:"message__bubble"},n&&r.a.createElement("p",{className:"message__text"},n),f&&r.a.createElement("div",{className:"message__typing"},r.a.createElement("span",null),r.a.createElement("span",null),r.a.createElement("span",null)),i&&r.a.createElement(H,{audio:i})),r.a.createElement("div",{className:"message__attachments"},d.map((function(e){return r.a.createElement("div",{key:e.url,className:"message__attachments-item"},r.a.createElement("img",{src:e.url,alt:e.filename}))}))),l&&r.a.createElement("span",{className:"message__date"},r.a.createElement(Q,{date:l})))))},J=a(162),W=a(253),X=function(e){return+Date.now()-new Date(e)<3e5},q=(a(313),function(e){var t=e.partner,a=void 0===t?{}:t,n=e.author,c=void 0===n?{}:n,s=e.userId,i=e.message,o=e.unread,u=e.isMe,m=e.id,d=e.currentDialog;return r.a.createElement(l.b,{to:"/dialog/".concat(m)},r.a.createElement("div",{className:k()("dialogs__item",{"dialogs__item--online":X(a._id===s?c.last_seen:a.last_seen),active:d===m})},r.a.createElement("div",{className:"dialogs__item-avatar"},r.a.createElement(se,{user:a})),r.a.createElement("div",{className:"dialogs__item-info"},r.a.createElement("div",{className:"dialogs__item-info-top"},r.a.createElement("b",null,a._id===s?c.fullname:a.fullname),i&&r.a.createElement("span",null,function(e){var t=new Date(e);return Object(W.a)(t)?Object(J.a)(t,"HH:mm"):Object(J.a)(t,"dd.MM.yyyy")}(i.createdAt))),r.a.createElement("div",{className:"dialogs__item-info-bottom"},i&&r.a.createElement("p",null,i.text),0===o&&u&&i&&r.a.createElement(ne,{isRead:i.unread}),o>0&&r.a.createElement("div",{className:"dialogs__item-info-bottom-count"},o>9?"+9":o)))))}),K=a(250),$=a(251),Q=function(e){var t=e.date;return r.a.createElement(n.Fragment,null,Object(K.a)(new Date(t),{addSuffix:!0,locale:$.a}))},Y=a(235),ee=a.n(Y),te=a(236),ae=a.n(te),ne=function(e){return e.isRead?r.a.createElement("img",{className:"message__icon-read",src:ee.a,alt:"Checked icon"}):r.a.createElement("img",{className:"message__icon-read message__icon-read--no",src:ae.a,alt:"Checked icon"})},re=a(80),ce=(a(315),function(e){var t=e.items,a=e.onSearch,n=e.inputValue,c=e.currentDialog,s=e.userId;return t=t.sort((function(e,t){return new Date(t.date)-new Date(e.date)})),console.log(t),r.a.createElement("div",{className:"dialogs"},r.a.createElement("div",{className:"chat__sidebar-search"},r.a.createElement(N.a.Search,{placeholder:"\u041f\u043e\u0438\u0441\u043a \u0441\u0440\u0435\u0434\u0438 \u043a\u043e\u043d\u0442\u0430\u043a\u0442\u043e\u0432",onChange:function(e){return a(e.target.value)},value:n})),t.length>0?t.map((function(e){return r.a.createElement(q,{key:e._id,id:e._id,userId:s,author:e.author,partner:e.partner,message:e.lastMessage,unread:0,onSearch:a,currentDialog:c})})):r.a.createElement(re.a,{image:re.a.PRESENTED_IMAGE_SIMPLE,description:"\u041d\u0435\u0442 \u0434\u0438\u0430\u043b\u043e\u0433\u043e\u0432"}))}),se=(a(320),function(e){var t=e.user;if(t.avatar)return r.a.createElement("img",{src:t.avatar,alt:"".concat(t.avatar," avatar")});var a=function(e){var t=e.substr(-3,3).split("").map((function(e){return e.charCodeAt(0)>255?255:e.charCodeAt(0)})),a=Object(I.a)(t,3),n=a[0],r=a[1],c=a[2],s=T()({r:n,g:r,b:c}),l=T()({r:n,g:r,b:c}).lighten(40);return{color:s.toHexString(),colorLighten:l.toHexString()}}(t._id),n=t.fullname[0].toUpperCase();return r.a.createElement("div",{className:"avatar avatar--symbol",style:{background:"linear-gradient(135deg,".concat(a.color," 0%,").concat(a.colorLighten," 96.52%)")}},n)}),le=(a(321),function(e){var t=e.online,a=e.fullname;return r.a.createElement("div",{className:"chat__dialog-header-center"},r.a.createElement("b",{className:"chat__dialog-header-username"},a),r.a.createElement("div",{className:"chat__dialog-header-status"},r.a.createElement("span",{className:k()("status",{"status--online":t})},t?"\u043e\u043d\u043b\u0430\u0439\u043d":"\u043e\u0444\u043b\u0430\u0439\u043d")))}),ie=(a(322),function(e){var t=e.onSendMessage,a=Object(n.useState)(""),c=Object(I.a)(a,2),s=c[0],l=c[1];return r.a.createElement("div",{className:"chat-input"},r.a.createElement(N.a,{onKeyUp:function(e){13===e.keyCode&&t(s),13===e.keyCode&&l("")},value:s,onChange:function(e){return l(e.target.value)},size:"large",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043a\u0441\u0442 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f..."}),r.a.createElement("div",{className:"chat-input__actions"},r.a.createElement(j.a,{type:"ghost",icon:"message",onClick:function(){t(s),l("")}})))}),oe=a(518),ue=(a(323),function(e){var t=e.blockRef,a=e.items,n=e.currentUser,c=e.onDeleteMessage,s=e.isLoading;return r.a.createElement("div",{ref:t,className:"messages__block"},s?r.a.createElement("div",{className:"messages--loading"},r.a.createElement(oe.a,{tip:"\u0417\u0430\u0433\u0440\u0443\u0437\u043a\u0430 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0439..."})):a.length>0?a.map((function(e){return r.a.createElement(Z,{key:e._id,id:e._id,user:e.user,date:e.date,text:e.text,read:e.read,onDeleteMessage:c,isMe:n._id===e.user._id})})):r.a.createElement(re.a,{description:"\u041d\u0435\u0442 \u043d\u0438 \u043e\u0434\u043d\u043e\u0433\u043e \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f"}))}),me=a(79),de=a.n(me);de.a.defaults.baseURL=window.location.origin,de.a.defaults.headers.common.token=localStorage.token;var fe=de.a,Ee=function(){return fe.get("/dialogs")},ge=function(e,t){return fe.post("/dialogs",{partner:e,text:t})},pe=function(e){return fe.get("/messages?dialog=".concat(e))},he=function(e,t){return fe.post("/messages",{text:e,dialog_id:t})},ve=function(e){return fe.delete("/messages/".concat(e))},_e=function(e){return fe.post("/user/login",e)},be=function(){return fe.get("user/me")},Se=function(e){return fe.post("/user/register",e)},ye=function(e){return fe.get("/user/verify?hash=".concat(e))},Oe=function(e){return fe.get("/user/find?query=".concat(e))},Ne=(a(343),function(e){var t=e.location,a=e.history,c=t.search&&t.search.split("=")[1],s=Object(n.useState)(!0),l=Object(I.a)(s,2),i=l[0],o=l[1],u=Object(n.useState)(!1),m=Object(I.a)(u,2),d=m[0],f=m[1];Object(n.useEffect)((function(){i&&ye(c).then((function(e){o(!1),f(!0)})).catch((function(e){o(!1),f(!1)}))}));if(i){var E=r.a.createElement(w.a,{type:"loading",style:{fontSize:24},spin:!0});return r.a.createElement("div",{className:"verify"},r.a.createElement(A,{className:"block__spinner"},r.a.createElement(oe.a,{indicator:E})))}return r.a.createElement("div",{className:"verify"},r.a.createElement(A,null,r.a.createElement("div",{className:"verify__success-block"},d?r.a.createElement(n.Fragment,null,r.a.createElement("div",null,r.a.createElement(w.a,{type:"check-circle",theme:"twoTone"})),r.a.createElement("h2",null," \u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u043b\u0438 \u043f\u043e\u0447\u0442\u0443!"),r.a.createElement("br",null),r.a.createElement(M,{onClick:function(){a.push("/login")},type:"primary"},"\u0412\u043e\u0439\u0442\u0438")):r.a.createElement(n.Fragment,null,r.a.createElement("div",null,r.a.createElement(w.a,{type:"close-circle",theme:"twoTone"})),r.a.createElement("h2",null,"\u041f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044c \u043d\u0435 \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d")))))}),we=a(519),je=a(523),De=a(240),ke=a.n(De)()(window.location.origin.replace("3000","3030"));console.log(ke);var Me=ke,Ae={setDialogs:function(e){return{type:"DIALOGS:SET_ITEMS",payload:e}},fetchDialogs:function(){return function(e){Ee().then((function(t){var a=t.data;e(Ae.setDialogs(a))}))}},setCurrentDialog:function(e){return{type:"DIALOGS:SET_CURRENT_DIALOG",payload:e}}},Ie=Ae,Ce={setMessages:function(e){return{type:"MESSAGES:SET_ITEMS",payload:e}},setIsLoading:function(e){return{type:"MESSAGES:SET_IS_LOADING",payload:e}},removeMessage:function(e){return{type:"MESSAGES:REMOVE_MESSAGE",payload:e}},addMessage:function(e){return function(t){pe(e).then((function(e){var a=e.data;t(Ce.setMessages(a))}))}},removeMessageById:function(e){return function(t){window.confirm("\u0412\u044b \u0434\u0435\u0439\u0441\u0442\u0432\u0438\u0442\u0435\u043b\u044c\u043d\u043e \u0445\u043e\u0442\u0438\u0442\u0435 \u0443\u0434\u0430\u043b\u0438\u0442\u044c \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u0435?")&&ve(e).then((function(a){a.data;t(Ce.removeMessage(e))})).catch((function(e){console.log("Cannot remove message")}))}},fetchSendMessage:function(e){return function(t,a){var n=a().dialogs;e&&n.currentDialog&&he(e,n.currentDialog)}},fetchMessages:function(e){return function(t){t(Ce.setIsLoading(!0)),pe(e).then((function(e){var a=e.data;t(Ce.setMessages(a))})).catch((function(){t(Ce.setIsLoading(!1))}))}}},Le=Ce,xe={setUserData:function(e){return{type:"USER:SET_DATA",payload:e}},fetchUserData:function(){return function(e){be().then((function(t){var a=t.data;return e(xe.setUserData(a))}))}},fetchUserRegister:function(e,t,a){return function(e){return Se(a).then((function(e){"error"===e.data.status?(t(""),U({title:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u043d\u0435\u0443\u0441\u043f\u0435\u0448\u043d\u0430",text:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438",type:"error"})):t("success")})).catch((function(e){var a=e.response.data;a.message&&11e3===a.message.code?t("user_found"):t("error")}))}},fetchUserLogin:function(e,t,a){return function(e){return _e(a).then((function(a){var n=a.data,r=n.status,c=n.token;"error"===r?(t(""),U({title:"\u041e\u0448\u0438\u0431\u043a\u0430 \u043f\u0440\u0438 \u0430\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u0438",text:"\u041d\u0435\u0432\u0435\u0440\u043d\u044b\u0439 \u043b\u043e\u0433\u0438\u043d \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c",type:"error"})):(t(""),U({title:"\u041e\u0442\u043b\u0438\u0447\u043d\u043e",text:"\u0410\u0432\u0442\u043e\u0440\u0438\u0437\u0430\u0446\u0438\u044f \u0443\u0441\u043f\u0435\u0448\u043d\u0430",type:"success"}),e(xe.setUserData(n)),localStorage.token=c,de.a.defaults.headers.common.token=localStorage.token,e(xe.fetchUserData()))})).catch((function(e){t("error")}))}}},Te=xe,Re=Object(i.b)((function(e){var t=e.dialogs,a=e.user;return Object(m.a)({},a,{},t)}),Ie)((function(e){var t=e.fetchDialogs,a=e.items,c=e.data,s=e.currentDialog,l=e.firstLoaded,i=c&&c._id,o=Object(n.useState)(""),u=Object(I.a)(o,2),m=u[0],d=u[1],f=Object(n.useState)(Array.from(a)),E=Object(I.a)(f,2),g=E[0],p=E[1];return Object(n.useEffect)((function(){a.length||l?p(a):(t(),Me.on("SERVER:DIALOG_CREATED",(function(){t()})))}),[t,a,l]),r.a.createElement(ce,{items:g,userId:i,onSearch:function(e){p(a.filter((function(t){return t.partner.fullname.toLowerCase().indexOf(e.toLowerCase())>=0}))),d(e)},inputValue:m,currentDialog:s})})),Ue=Object(i.b)((function(e){var t=e.dialogs,a=e.messages,n=e.user;return Object(m.a)({currentDialog:t.currentDialog},a,{},n)}),Le)((function(e){var t=Object(n.useRef)(null),a=e.items,c=e.currentDialog,s=e.fetchMessages,l=e.data,i=e.addMessage,o=e.removeMessageById,u=e.isLoading;return console.log(e),Object(n.useEffect)((function(){return"im"!==c&&(s(c),Me.on("SERVER:NEW_MESSAGE",(function(){i(c)}))),function(){Me.removeListener("SERVER:NEW_MESSAGE")}}),[c,s,i]),Object(n.useEffect)((function(){t.current&&t.current.scrollTo(0,9999999)}),[a]),"im"===c?r.a.createElement(re.a,{description:"\u041e\u0442\u043a\u0440\u043e\u0439\u0442\u0435 \u0434\u0438\u0430\u043b\u043e\u0433"}):r.a.createElement(ue,{blockRef:t,onDeleteMessage:o,items:a,currentUser:l,isLoading:u})})),Ge=Object(i.b)(null,Le)((function(e){var t=e.fetchSendMessage;return r.a.createElement(ie,{onSendMessage:function(e){t(e)}})})),Fe=Object(i.b)((function(e){return{dialogs:e.dialogs,user:e.user.data}}))((function(e){var t=e.dialogs,a=e.user;if(console.log(a),!t.items.length||"im"===t.currentDialog)return r.a.createElement("div",{className:"chat__dialog-header-center"},r.a.createElement("b",{className:"chat__dialog-header-username status__username"},"Hello, ",a?a.fullname:"username"));var n=!1,c=t.items.find((function(e){return e._id===t.currentDialog}));return n=c.author._id===a._id?X(c.partner.last_seen):X(c.author.last_seen),r.a.createElement(le,{online:n,fullname:c.partner._id===a._id?c.author.fullname:c.partner.fullname})})),Ve=Object(i.b)()((function(e){var t=Object(n.useState)(!1),a=Object(I.a)(t,2),c=a[0],s=a[1],l=Object(n.useState)(""),i=Object(I.a)(l,2),o=i[0],u=i[1],m=Object(n.useState)([]),d=Object(I.a)(m,2),f=d[0],E=d[1],g=Object(n.useState)(!1),p=Object(I.a)(g,2),h=p[0],v=p[1],_=Object(n.useState)(""),b=Object(I.a)(_,2),S=b[0],y=b[1],O=Object(n.useState)(""),N=Object(I.a)(O,2),w=N[0],j=N[1],D=function(){s(!1),u(""),j("")};return r.a.createElement(Pe,{inputValue:o,visible:c,isLoading:h,onClose:D,onSelectUser:function(e){y(e)},setVisible:s,setInputValue:u,setMessageText:j,messageText:w,onChangeInput:function(e){u(e)},onSearch:function(e){v(!0),Oe(e).then((function(e){var t=e.data;E(t),v(!1)})).catch((function(e){v(!1)}))},users:f,onAddDialog:function(){v(!0),w&&ge(S,w).then((function(e){e.data;v(!1),j(""),u(""),D()})).catch((function(){v(!1)})),v(!1)}})})),ze=we.a.Option,Be=N.a.TextArea,Pe=function(e){var t=e.visible,a=e.inputValue,n=e.messageText,c=e.setVisible,s=e.setMessageText,l=e.isLoading,i=e.onClose,o=e.onChangeInput,u=e.onSearch,m=e.onSelectUser,d=e.onAddDialog,f=e.users,E=(void 0===f?[]:f).map((function(e){return r.a.createElement(ze,{key:e._id},e.fullname)}));return r.a.createElement("div",{className:"chat__sidebar"},r.a.createElement("div",{className:"chat__sidebar-header"},r.a.createElement("div",null,r.a.createElement(w.a,{type:"team"}),r.a.createElement("span",null,"\u0421\u043f\u0438\u0441\u043e\u043a \u0434\u0438\u0430\u043b\u043e\u0433\u043e\u0432")),r.a.createElement(w.a,{onClick:function(){return c(!0)},type:"form"})),r.a.createElement("div",{className:"chat__sidebar-dialogs"},r.a.createElement(Re,null)),r.a.createElement(je.a,{title:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0434\u0438\u0430\u043b\u043e\u0433",visible:t,onOk:d,onCancel:i,okText:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c",cancelText:"\u0417\u0430\u043a\u0440\u044b\u0442\u044c",confirmLoading:l},r.a.createElement("p",null,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f \u0438\u043b\u0438 e-mail \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f:"),r.a.createElement(we.a,{value:a,style:{width:"100%"},onSearch:u,onChange:o,onSelect:m,notFoundContent:null,defaultActiveFirstOption:!1,showArrow:!1,filterOption:!1,showSearch:!0},E),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("p",null,"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043a\u0441\u0442 \u0441\u043e\u043e\u0431\u0449\u0435\u043d\u0438\u044f:"),r.a.createElement(Be,{onChange:function(e){return s(e.target.value)},value:n,autoSize:{minRows:3,maxRows:5}})))},He=a(161),Ze=a.n(He),Je=a(242),We=a(243),Xe=a(254),qe=a(244),Ke=a(256),$e=a(520);function Qe(e){return new Promise((function(t,a){var n=new FileReader;n.readAsDataURL(e),n.onload=function(){return t(n.result)},n.onerror=function(e){return a(e)}}))}r.a.Component;var Ye=function(e){var t=e.touched,a=e.errors,n=e.handleChange,c=e.handleBlur,s=e.handleSubmit,i=e.status;return r.a.createElement("div",null,r.a.createElement("div",{className:"auth__top"},r.a.createElement("h2",null,"\u0412\u043e\u0439\u0442\u0438 \u0432 \u0430\u043a\u043a\u0430\u0443\u043d\u0442"),r.a.createElement("p",null,"\u041f\u043e\u0436\u0430\u043b\u0443\u0439\u0441\u0442\u0430, \u0432\u043e\u0439\u0434\u0438\u0442\u0435 \u0432 \u0441\u0432\u043e\u0439 \u0430\u043a\u043a\u0430\u0443\u043d\u0442")),r.a.createElement(A,null,r.a.createElement(O.a,{className:"login-form"},r.a.createElement(O.a.Item,{validateStatus:L("email",t,a),hasFeedback:!0,help:t.email?a.email:""},r.a.createElement(N.a,{id:"email",prefix:r.a.createElement(w.a,{type:"mail",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"E-mail",size:"large",onChange:n,onBlur:c})),r.a.createElement(O.a.Item,{validateStatus:L("password",t,a),hasFeedback:!0,help:t.password?a.password:""},r.a.createElement(N.a,{prefix:r.a.createElement(w.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",size:"large",id:"password",onChange:n,onBlur:c})),r.a.createElement(O.a.Item,{validateStatus:"error",help:"error"===i?"Some errors":""},r.a.createElement(M,{onClick:s,type:"primary",size:"large"},"\u0412\u043e\u0439\u0442\u0438 \u0432 \u0430\u043a\u043a\u0430\u0443\u043d\u0442")),r.a.createElement(l.b,{className:"auth__register-link",to:"/register"},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"))))},et=function(e){var t=e.isAuth,a=e.values,n=e.errors,r={email:function(e){e?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e)||(n.email="\u041d\u0435\u0432\u0435\u0440\u043d\u043e \u0432\u0432\u0435\u0434\u0435\u043d e-mail"):n.email="\u0412\u0432\u0435\u0434\u0438\u0442\u0435 e-mail"},password:function(e){e?/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])/i.test(e)||t||(n.password="\u041f\u0430\u0440\u043e\u043b\u044c \u0434\u043e\u043b\u0436\u0435\u043d \u0441\u043e\u0434\u0435\u0440\u0436\u0430\u0442\u044c \u0446\u0438\u0444\u0440\u0443 \u0438 \u0431\u0443\u043a\u0432\u0443"):n.password="\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c"},fullname:function(e){e||(n.fullname="\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0438\u043c\u044f")},password2:function(e){e?e!==a.password&&(n.password2="\u041f\u0430\u0440\u043e\u043b\u0438 \u043d\u0435 \u0441\u043e\u0432\u043f\u0430\u0434\u0430\u044e\u0442"):n.password2="\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c"}};Object.keys(a).forEach((function(e){return r[e]&&r[e](a[e])}))},tt=Object(y.a)({mapPropsToValues:function(){return{email:"",password:""}},validate:function(e){var t={};return et({isAuth:!0,values:e,errors:t}),t},handleSubmit:function(e,t){var a=t.setSubmitting,n=t.setStatus;return b.dispatch(Te.fetchUserLogin(a,n,e))},displayName:"LoginForm"})(Ye),at=function(e){var t=e.touched,a=e.errors,n=e.handleChange,c=e.handleBlur,s=e.handleSubmit,i=e.status;return r.a.createElement("div",null,"success"!==i?r.a.createElement("div",{className:"auth__top"},r.a.createElement("h2",null,"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f"),r.a.createElement("p",null,"\u0414\u043b\u044f \u0432\u0445\u043e\u0434\u0430 \u0432 \u0447\u0430\u0442, \u0432\u0430\u043c \u043d\u0443\u0436\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f")):r.a.createElement("div",{className:"auth__top"},r.a.createElement("h2",null,"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f \u043f\u0440\u043e\u0448\u043b\u0430 \u0443\u0441\u043f\u0435\u0448\u043d\u043e!")),r.a.createElement(A,null,"success"!==i?r.a.createElement(O.a,{className:"login-form"},r.a.createElement(O.a.Item,{validateStatus:L("email",t,a),hasFeedback:!0,help:t.email?a.email:""},r.a.createElement(N.a,{id:"email",prefix:r.a.createElement(w.a,{type:"mail",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"E-mail",size:"large",onChange:n,onBlur:c})),r.a.createElement(O.a.Item,{validateStatus:L("fullname",t,a),hasFeedback:!0,help:t.fullname?a.fullname:""},r.a.createElement(N.a,{id:"fullname",prefix:r.a.createElement(w.a,{type:"user",style:{color:"rgba(0,0,0,.25)"}}),placeholder:"\u0412\u0430\u0448\u0435 \u0438\u043c\u044f",size:"large",onChange:n,onBlur:c})),r.a.createElement(O.a.Item,{validateStatus:L("password",t,a),hasFeedback:!0,help:t.password?a.password:""},r.a.createElement(N.a,{prefix:r.a.createElement(w.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",size:"large",id:"password",onChange:n,onBlur:c})),r.a.createElement(O.a.Item,{validateStatus:L("password2",t,a),hasFeedback:!0,help:t.password2?a.password2:""},r.a.createElement(N.a,{prefix:r.a.createElement(w.a,{type:"lock",style:{color:"rgba(0,0,0,.25)"}}),type:"password",placeholder:"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u0435 \u043f\u0430\u0440\u043e\u043b\u044c",size:"large",id:"password2",onChange:n,onBlur:c})),r.a.createElement(O.a.Item,{validateStatus:"error",help:"error"===i?"Some errors":"user_found"===i?"E-mail \u0443\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d":""},r.a.createElement(M,{onClick:s,type:"primary",size:"large"},"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f")),r.a.createElement(l.b,{className:"auth__register-link",to:"/login"},"\u0412\u043e\u0439\u0442\u0438 \u0432 \u0430\u043a\u043a\u0430\u0443\u043d\u0442")):r.a.createElement("div",{className:"auth__success-block"},r.a.createElement("div",null,r.a.createElement(w.a,{type:"info-circle",theme:"twoTone"})),r.a.createElement("h2",null,"\u041f\u043e\u0434\u0442\u0432\u0435\u0440\u0434\u0438\u0442\u0435 \u0441\u0432\u043e\u0439 \u0430\u043a\u043a\u0430\u0443\u043d\u0442"),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("p",null,"\u041d\u0430 \u0412\u0430\u0448\u0443 \u043f\u043e\u0447\u0442\u0443 \u043e\u0442\u043f\u0440\u0430\u0432\u043b\u0435\u043d\u043e \u043f\u0438\u0441\u044c\u043c\u043e \u0441 \u0441\u0441\u044b\u043b\u043a\u043e\u0439 \u0434\u043b\u044f \u043f\u043e\u0434\u0442\u0432\u0435\u0440\u0436\u0434\u0435\u043d\u0438\u044f \u0430\u043a\u043a\u0430\u0443\u043d\u0442\u0430."))))},nt=Object(y.a)({mapPropsToValues:function(){return{email:"",password:"",fullname:"",password2:""}},validate:function(e){var t={};return et({isAuth:!1,values:e,errors:t}),t},handleSubmit:function(e,t){var a=t.setSubmitting,n=t.setStatus;return b.dispatch(Te.fetchUserRegister(a,n,e))},displayName:"RegisterForm"})(at),rt=(a(512),function(){return r.a.createElement("section",{className:"auth"},r.a.createElement("div",{className:"auth__content"},r.a.createElement(S.b,{exact:!0,path:["/","/login"],component:tt}),r.a.createElement(S.b,{exact:!0,path:"/register",component:nt})))}),ct=(a(513),Object(S.f)(Object(i.b)((function(e){return e.dialogs}),Ie)((function(e){var t=e.setCurrentDialog;return Object(n.useEffect)((function(){var a=e.location.pathname.split("/").pop();t(a)}),[e,t]),r.a.createElement("section",{className:"home"},r.a.createElement("div",{className:"chat"},r.a.createElement(Ve,null),r.a.createElement("div",{className:"chat__dialog"},r.a.createElement("div",{className:"chat__dialog-header"},r.a.createElement("div",null),r.a.createElement(Fe,null),r.a.createElement(w.a,{type:"ellipsis",style:{fontSize:"22px"}})),r.a.createElement("div",{className:"chat__dialog-messages"},r.a.createElement(Ue,null)),r.a.createElement("div",{className:"chat__dialog-input"},r.a.createElement(Ge,null)))))})))),st=Object(i.b)((function(e){return{isAuth:e.user.isAuth}}))((function(e){var t=e.isAuth;return r.a.createElement("div",{className:"wrapper"},t?r.a.createElement(S.a,{to:"/im"}):"/verify"===window.location.pathname?r.a.createElement(S.b,{path:"/verify",component:Ne}):r.a.createElement(S.a,{to:"/login"}),r.a.createElement(S.b,{exact:!0,path:["/","/login","/register"],component:rt}),r.a.createElement(S.b,{exact:!0,path:["/im","/dialog/:id"],component:ct}))}));a(514),a(515);b.dispatch(Te.fetchUserData()),s.a.render(r.a.createElement(i.a,{store:b},r.a.createElement(l.a,null,r.a.createElement(st,null))),document.getElementById("root"))}},[[259,1,2]]]);
//# sourceMappingURL=main.01e8a45a.chunk.js.map